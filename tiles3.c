#include <stdio.h>
#include <math.h>
#include <string.h>
#include <sys/time.h>

// Print an array of floats in [,,] format
void printFloatArray(float *arr, int len){
	printf("[");
	for (int i = 0; i < len -1; ++i) {
		printf("%.2f, ", arr[i]);
	}
	printf("%.2f]", arr[len-1]);

	printf("\n");	
}

// Print an array of ints in [,,] format
void printArray(int *arr, int len){
	printf("[");
	for (int i = 0; i < len -1; ++i) {
		printf("%d, ", arr[i]);
	}
	printf("%d]", arr[len-1]);

	printf("\n");	
}

// A hash function for an array of floats
unsigned hashFloatArray(float *arr, int len) {
    unsigned h = 1;
    for (int i = 0; i < len; i++){
    	
    	int floatAsInt = *(int*)(&arr[i]);
        h = 31 * h + floatAsInt;
    }

    h ^= ((unsigned) h >> 20) ^ ((unsigned)h >> 12);
    return h ^ ((unsigned)h >> 7) ^ ((unsigned)h >> 4);
}

// a wrapper for the hash function that uses modulus on the size
unsigned hashcoords(float *coordinates, int numCoordinates, int size){
	int hashValue = 0;
	if (size > 0){
		hashValue = hashFloatArray(coordinates, numCoordinates) % size;
	}
	return hashValue;
}

// returns num-tilings tile indicies corresponding to the floats and ints
void tiles(int size, int numtilings, float *floats, int lenFloats, int *ints, int lenInts, int *Tiles) {
	

	int numCoordinates = 1 + lenFloats + lenInts;

	float coords[numCoordinates];

	for (int i = 0; i < lenInts; i++){
		coords[i + 1 + lenFloats] = (float) ints[i];
	}

	float qfloats[lenFloats];
	for (int i = 0; i < lenFloats; ++i) {
		qfloats[i] = floor(floats[i]*numtilings);
	}


	// Python: for tiling in range(numtilings):
	for (int i = 0; i < numtilings; ++i) {
		int tilingX2 = i * 2;

		coords[0] = i;

		// Python: for q in qfloats:
		for (int j = 0; j < lenFloats; ++j) {
			coords[j + 1] = floor((qfloats[j] + i + j*tilingX2) / numtilings);
		}

		Tiles[i] = hashcoords(coords, numCoordinates, size);
	}
}

// returns num-tilings tile indices corresponding to the floats and ints, wrapping some floats
void tileswrap(int size, int numtilings, float *floats, int lenFloats, int *wrapwidths, int *ints, int lenInts, int *Tiles) {
	
	int numCoordinates = 1 + lenFloats + lenInts;

	// Python: qfloats = [floor(f*numtilings) for f in floats]
	float qfloats[lenFloats];
	for (int i = 0; i < lenFloats; ++i) {
		qfloats[i] = floor(floats[i]*numtilings);
	}

	// Python: for tiling in range(numtilings):
	for (int i = 0; i < numtilings; ++i) {
		int tilingX2 = i * 2;

		float coords[numCoordinates];
		coords[0] = i;
		int b = i;

		// Python: for q, width in zip_longest(qfloats, wrapwidths):
		for (int j = 0; j < lenFloats; ++j) {
			

			// Python: c = (q + b%numtilings) // numtilings
			int c = (int)floor((qfloats[j] + b%numtilings) / numtilings);
			
            // Python: coords.append(c%width if width else c)

			if (wrapwidths[j] > 0){
				coords[j + 1] = c % wrapwidths[j];
			} else {
				coords[j + 1] = c;
			}

			b += tilingX2;
		}

		// Python: coords.extend(ints)
		if (lenInts > 0){
			for (int j = 0; j < lenInts; ++j) {
				coords[j + 1 + lenFloats] = (float) ints[j];
			}
		}

		// Debugging: printFloatArray(coords, numCoordinates);

		Tiles[i] = hashcoords(coords, numCoordinates, size);
	}
}


double time_diff(struct timeval x , struct timeval y){
	double x_ms , y_ms , diff;
	 
	x_ms = (double)x.tv_sec*1000000 + (double)x.tv_usec;
	y_ms = (double)y.tv_sec*1000000 + (double)y.tv_usec;
	 
	diff = (double)y_ms - (double)x_ms;
	 
	return diff;
}

int main(int argc, char ** argv) {

	float floats[3] = {.3, .5, .7}; //{0.3703749807374672, 0.5243044154941834, 0.6849698421083965, 0.26698459624432846, 0.9862839732728923, 0.163988641484758, 0.522444155094967, 0.3130668469718665, 0.8782534911531377, 0.2674286994210482, 0.46041893431655034, 0.8292879631267407, 0.3137286484823898, 0.18235938960346587, 0.5569805125343681, 0.018425741934124273, 0.018187933783631482, 0.6178364038051081, 0.012804074228362383, 0.3635972794857527, 0.6911683809600335, 0.734872501705176, 0.5728988015219107, 0.9162873720950124, 0.6009616507859017, 0.5132375870498904, 0.5509461535262072, 0.1330449135905405, 0.47104843255171125, 0.9187956357019116, 0.4182192079828284, 0.33195921839075426, 0.3925813966310303, 0.8761607579055768, 0.4641980845528928, 0.40459678156904366, 0.04648323388608233, 0.8133096803617204, 0.8934139737130364, 0.012371070693410813, 0.06079865270670837, 0.3731666585125015, 0.045436237092274734, 0.3542288903124764, 0.9166762359270759, 0.6234048656238709, 0.027537889431751283, 0.6027589788065044, 0.7984668110288831, 0.4177334657602638, 0.9575973048201387, 0.06622940627882268, 0.3767275034472657, 0.5191070782202472, 0.009897007441921568, 0.10826711008422896, 0.36523201589163157, 0.8898925893341221, 0.6960004200636565, 0.7144329595486618, 0.6750079133232785, 0.5820643456208416, 0.6678662738284129, 0.4088488460751103, 0.9792205232109676, 0.5712455531711318, 0.6296633473395052, 0.504641810543452, 0.17796703331242592, 0.5317741350196019, 0.10919705015657044, 0.7565105179121698, 0.802368203474817, 0.21709112576917944, 0.0147459057375392, 0.9324929553713466, 0.8496220213876411, 0.9819929652677499, 0.03818037027187349, 0.5228776443669854, 0.6000921562236128, 0.3177654191218797, 0.4571968037562555, 0.2843686604007938, 0.2170202272284023, 0.43294519215829097, 0.5107368058197015, 0.08040690325671007, 0.032712624485376596, 0.7902254089581464, 0.45823125106778484, 0.17381912722873727, 0.7360020894425019, 0.3653608158020305, 0.7727494395331058, 0.049100146494807095, 0.3096312187278256, 0.9565254085922419, 0.526322022238598, 0.025760947744105422, 0.12233276977058671, 0.6525098900532211, 0.872931638901371, 0.6748709998364948, 0.2511008253815352, 0.9956160214820324, 0.770887010836792, 0.774775502097474, 0.09414105473715328, 0.052008968944931455, 0.9935541253412421, 0.6777254626987912, 0.6414375190640937, 0.4895074837332103, 0.053788277779424964, 0.22853114651978612, 0.4914001461016353, 0.9156010562753227, 0.15315958936337992, 0.07097235094828358, 0.0686767014486307, 0.23389336806390548, 0.05968095178315891, 0.41202337123324506, 0.6654542187170349, 0.523692822041385, 0.8743997831211126, 0.06256655498953556, 0.4680614902641169, 0.5169622885681859, 0.7338972468553562, 0.5866406114656679, 0.28218405490485754, 0.5014952055483639, 0.34903381656585086, 0.8948071036261003, 0.26663932580674743, 0.7745422234266091, 0.9451454203796732, 0.38729556854734826, 0.9649798308019419, 0.9114307876308616, 0.5901050748749443, 0.33723765909210957, 0.5562972054638273, 0.8364067541241187, 0.7096988807348656, 0.6343685112783561, 0.9167401779235262, 0.8614282099101827, 0.1932373353105583, 0.6631369415584263, 0.9437692741237462, 0.842309524191315, 0.7563580711506028, 0.32193166801426143, 0.8659552681732092, 0.7522707340487085, 0.09080508752148475, 0.1152187303857386, 0.5430976701545385, 0.6483672462067891, 0.4954815255920133, 0.3434260469243595, 0.6490999954268271, 0.9917853990149348, 0.7832375239806704, 0.49844356960893754, 0.6180905204671803, 0.8818877634651119, 0.04008033465884564, 0.1831429043839179, 0.8429417840308413, 0.17666703547255103, 0.24741301955365547, 0.5563293094577775, 0.8054224841132878, 0.10536525027897992, 0.399123684593818, 0.28737258983098113, 0.6869786642788815, 0.7892034453106926, 0.3182704674399359, 0.3460726484690715, 0.5310290450620991, 0.4653079670533411, 0.3234244718056203, 0.55706543392094, 0.026805525650548168, 0.263127942985274, 0.9619537999796284, 0.2635575012990521, 0.4664836922571223, 0.6499093392337703, 0.9363948396168429, 0.7305613076880402, 0.9950169107537596, 0.19800842722778378, 0.7760099378840375, 0.12035602798278022, 0.03531009540593888, 0.5695373127255192, 0.8703177606276218, 0.2998167293650815, 0.4109633009908549, 0.15406248651769516, 0.7549567200718579, 0.3952083238438324, 0.7560361776410509, 0.10836133403415293, 0.20284389185419816, 0.21645669537088907, 0.7697370250082443, 0.5603390918600937, 0.6261895778717348, 0.43665055933528163, 0.10062166569134634, 0.07932480352100502, 0.8084695689464512, 0.8882882401879655, 0.8293702292490379, 0.9445503919244629, 0.6687790507742806, 0.3168126824322637, 0.0007018395397875299, 0.28680936825182934, 0.5111531336499171, 0.8797282481840227, 0.5997301031757247, 0.1518207240428171, 0.5165109869877389, 0.812097371982283, 0.08625979258568095, 0.9550435746935821, 0.6161879591422508, 0.5485080299476595, 0.01782047021652966, 0.8449958141917475, 0.6772308607308419, 0.8044838938583843, 0.04866256529549462, 0.026695513114558977, 0.08535001917600948, 0.880899230617189, 0.4798172499504971, 0.38091555081846007, 0.31745551002236994, 0.6914743680775015, 0.5690131049940359, 0.5475498969934736, 0.5419918975981513, 0.45081825864731373, 0.32211410242171135, 0.5948790270326032, 0.5660906772985312, 0.7911901784664856, 0.6472041108834317, 0.20341221524235475, 0.025096734345818605, 0.7508298231587294, 0.38238368449831617, 0.10497733793778896, 0.11322517367883922, 0.6773077001718142, 0.4856023999876806, 0.47483543617938984, 0.9027288123640873, 0.27228687807712104, 0.9575274500093203, 0.47692134755060844, 0.8751943817607095, 0.8439393702832674, 0.9452765114152091, 0.626879404636352, 0.11679584374837804, 0.055424653601580554, 0.5326664034114308, 0.9150288614087485, 0.3911779873065546, 0.863460499088621, 0.27812742442080984, 0.6300983681086856, 0.8033628838124793, 0.20949256926397264, 0.15821591335605456, 0.051445020482548065, 0.3596658585029253, 0.6711224736919046, 0.041461500542554264, 0.4846889839072699, 0.1432567043504882, 0.025334765563322925, 0.26152379612104615, 0.9220061705033034, 0.6011284678449793, 0.40319689755515453, 0.8692699873312242, 0.40024030643731057, 0.4487540908248935, 0.36618788078835873, 0.8195704123442442, 0.6491948571233268, 0.3557963940836828, 0.448176768772917, 0.2679801803355226, 0.5601062470643301, 0.2142400671807685, 0.3676022090463402, 0.011498736932034737, 0.04524314739449942, 0.21625654016526275, 0.12727010197008037, 0.9958181275703952, 0.5256307524634052, 0.09449367902318317, 0.5772727705396699, 0.9867458941230616, 0.12454394903918287, 0.5707691398821311, 0.9478681673653102, 0.42889723976308525, 0.08273248614425777, 0.13972360154405417, 0.4999011115299221, 0.9430332689811898, 0.022556354910838516, 0.374997112194035, 0.4912685277081035, 0.1308431659441045, 0.388598354593259, 0.817617245695071, 0.196134137731794, 0.029263946746270975, 0.816093802163145, 0.21448688859656095, 0.20972830614705362, 0.04652008805383656, 0.7661977900939343, 0.06431392774239475, 0.21415423514120469, 0.8437007285364233, 0.21776552104030134, 0.04083224320218393, 0.014866910506019293, 0.7672893174599755, 0.37253089096921355, 0.5527440351328459, 0.4204805803116525, 0.02682865848428162, 0.31522217115263507, 0.04582700337550816, 0.9506640096863324, 0.8685842781217841, 0.6580920572131999, 0.2432313507880468, 0.19629179008988662, 0.742099147987346, 0.49964631541937754, 0.6114279230075628, 0.920503116095756, 0.1759804331454411, 0.42886890187440474, 0.19055925981115074, 0.44669695961764, 0.7389339685341132, 0.8890213457795144, 0.29157526641190645, 0.8459603121863877, 0.7087393758883114, 0.9043366198960126, 0.9972312824211562, 0.2794231288758906, 0.721797662242595, 0.8452436491915698, 0.49471698624490323, 0.5635681274344522, 0.3206535283881158, 0.1828246346855995, 0.09379251589870563, 0.256623696616302, 0.9612346529804727, 0.361916591740556, 0.8135894077995951, 0.3680368606249591, 0.2669906938429172, 0.5424272744262986, 0.9365341800900593, 0.07096924868123611, 0.04006778849733106, 0.9944013356776173, 0.3138010058412777, 0.6896931726994933, 0.2235146673287245, 0.17190324277670643, 0.7907269985380294, 0.9821773917684633, 0.642231637193809, 0.5600249000746842, 0.09709002551044565, 0.1822679826491913, 0.279367649334356, 0.7551132785560744, 0.5445268087866304, 0.09706766016601187, 0.12318985933294613, 0.7350035669851422, 0.16830264715748933, 0.8928291376963631, 0.6683368663697395, 0.7656984346763991, 0.5414322266855738, 0.9142382064439774, 0.03438075224371717, 0.5830826361649533, 0.4086808117561873, 0.4780979810063528, 0.7311015554631728, 0.6033875523326375, 0.6303829883992929, 0.08822240792153191, 0.313067192069588, 0.1269321393229914, 0.14304786414876158, 0.760655972463766, 0.5885516437939866, 0.8922917448713827, 0.9948832296174654, 0.7999500399455501, 0.8537370483774838, 0.8490527011958435, 0.8989932454223064, 0.3923931696096874, 0.49519312512700386, 0.3579951097281635, 0.6881208803181316, 0.4425182491721744, 0.5205025367601748, 0.9826965387721887, 0.1398655544216294, 0.8406695331273517, 0.6149112933032541, 0.36866231371610225, 0.3308852514130629, 0.9406706077150269, 0.2031592621211864, 0.2676017318686683, 0.343850678225766, 0.17749788078142936, 0.6524516134675706, 0.43544530595716435, 0.2761202479928664, 0.10773936153928942, 0.9211392530570353, 0.7273253382706668, 0.6091561486788157, 0.8262302940234634, 0.32144577956797504, 0.9487914359660727, 0.24438481044331528, 0.6956821227911845, 0.19158658503999204, 0.3873401847560056, 0.7112442857641765, 0.6667863860136156, 0.8198223276265177, 0.5667124374022388, 0.6726540319350227, 0.12863255080823, 0.525487384747557, 0.4552830382095676, 0.3837128566020871, 0.26654296947356526, 0.682485307071969, 0.22614441135168883, 0.6482567022175025, 0.7828560292233391, 0.15200853124297176, 0.8096331924758373, 0.8379886388336648, 0.285908488906623, 0.6689759789710139, 0.7823341466186937, 0.9618497086155224, 0.9083296351439571, 0.5342945247221444, 0.7448915993020779, 0.11685789722893891, 0.5665384903440871, 0.04443639979394032, 0.8056007259014863, 0.10598966353762429, 0.8329044046652554, 0.46464386318148354, 0.7792729007804406, 0.9459099654399878, 0.37824217708439845, 0.8460146204821299, 0.5040264163039372, 0.3644526334553253, 0.9438673474251227, 0.23829918417482943, 0.1971329040044687, 0.8516602378457425, 0.2268484303288798, 0.5681634169707483, 0.08031134619102942, 0.015047488916147156, 0.11179301649211504, 0.005428769592640714, 0.15645536764675727, 0.8999584645256558, 0.22583907890886668, 0.2735846088874512, 0.9866664325257941, 0.47730031363085423, 0.6794663458301347, 0.2620114187038758, 0.03311855107359518, 0.9605657689468345, 0.35631770309769295, 0.39063298667684054, 0.7033332685682812, 0.6378027542561966, 0.5422367310631431, 0.8032946711360618, 0.7432471027644543, 0.21478584504035036, 0.5851635064033565, 0.9093689277659525, 0.460391716466682, 0.8036065991285559, 0.9500206551854884, 0.3930971326942827, 0.39098858555135396, 0.7026114743376635, 0.7557038735344184, 0.9712407651033308, 0.6657412865014369, 0.5355074365770776, 0.1026161600841764, 0.8527852559767493, 0.10008709307791741, 0.3372289135958342, 0.17717433861541343, 0.8404086845557979, 0.946139853967717, 0.17393670315106569, 0.5360561883806134, 0.06416955049448658, 0.7039661005137055, 0.43721124871096384, 0.7166302205534727, 0.8911049210781707, 0.1299572081209246, 0.6917309204508333, 0.3583440541155727, 0.0747534733827413, 0.5797569533391427, 0.5794975370649029, 0.178557419314179, 0.9260898291865856, 0.5048454112321878, 0.07738298257566156, 0.344054965831305, 0.38070438476575674, 0.8457907049038353, 0.6714004338477342, 0.1075551227293785, 0.43483519425367834, 0.8859475317457266, 0.3471832702126809, 0.33884574375576904, 0.1360859102625247, 0.9822021816040563, 0.9805688731545092, 0.23297414408552064, 0.4236278307494161, 0.9710641757349923, 0.32341501565997377, 0.7485685477047592, 0.7207235374560266, 0.5696896119787893, 0.20622436572846836, 0.8866328296323549, 0.06902341825345082, 0.19551526131686603, 0.903198200180406, 0.4588789074060424, 0.6086349409849852, 0.4740254507413575, 0.4127915561844684, 0.9575712707946116, 0.6281601241139709, 0.5372212963554202, 0.6941157912088884, 0.02149997778627366, 0.21119881684201935, 0.974114154221398, 0.18000621693141428, 0.6332161629025581, 0.28692661450647594, 0.42477710974699434, 0.5707568767384776, 0.7252975953473819, 0.3400991330914951, 0.650220403676955, 0.6947274660716134, 0.5111040383953607, 0.855618706028604, 0.7472924411239414, 0.18225052141418874, 0.7782677587691536, 0.22392197034788697, 0.5255503463575273, 0.3441347795066103, 0.3655273191305539, 0.2604997449389086, 0.7484582251864951, 0.545483347484597, 0.8240786994635885, 0.15366987513160213, 0.9508799180140195, 0.31465988267354006, 0.011564050142997662, 0.5386013783859191, 0.8547861965767205, 0.9334936289084934, 0.37103335060502274, 0.9802278821458679, 0.5406526399845424, 0.13530377423257733, 0.1764263461010087, 0.030785084167319843, 0.7822385010853847, 0.8466600129131305, 0.568227705343183, 0.5154552707222708, 0.4311260595788182, 0.3746667747711514, 0.014284514755306343, 0.6247614626460047, 0.38615444494072393, 0.008542569123596078, 0.051300949538015894, 0.8540049884145684, 0.2939414368348565, 0.28517339855123747, 0.9842472063261802, 0.8786422988082601, 0.25173841831899857, 0.11138174422742342, 0.05223867901683965, 0.5797065022855994, 0.23424723048371798, 0.17476445565763687, 0.35139291442311915, 0.23934379948766882, 0.18437781374064022, 0.1425850291285804, 0.09008500911881101, 0.7857093193179336, 0.4480930289779752, 0.12961989232734705, 0.8739686342224626, 0.001012531456573651, 0.7125226784905547, 0.6130924107814748, 0.4897155273140432, 0.13302645091828147, 0.16213053499839813, 0.24655001965811318, 0.6914276946937388, 0.6371870291863477, 0.1622558957543332, 0.13525028505023817, 0.739117470766814, 0.9881747541110708, 0.41015182184476506, 0.15917554464841, 0.6751583737823557, 0.686268357034415, 0.20037574354134335, 0.5624645413348008, 0.62110963261512, 0.6033596629414941, 0.25085180929675555, 0.8510169668810819, 0.40844451583657904, 0.5589465686633002, 0.6284325725324635, 0.2736754640134733, 0.8047826508732583, 0.9908815038056797, 0.7290843067875674, 0.04364731020834145, 0.34178829668159105, 0.5764971275979909, 0.5970773521022905, 0.5850273913889323, 0.8218208746660007, 0.30691135750210474, 0.47135915454676924, 0.6691383718083568, 0.16800127431734135, 0.6355328694947815, 0.538921853405, 0.3243344293592503, 0.47879233216064176, 0.4142266224059947, 0.4732494975945061, 0.9939626386627125, 0.6748405506724353, 0.9703724616921987, 0.17322351010536186, 0.6339011871755689, 0.187903496925788, 0.21591351640283163, 0.5520536665277009, 0.6179104122763879, 0.5250777635090078, 0.43785100009905364, 0.2249585177239366, 0.039010794727367015, 0.495956086686123, 0.1768533321881256, 0.8229067761524469, 0.8330143322882237, 0.02721703076683646, 0.9761123923279418, 0.17428877709511248, 0.868457508435398, 0.7752251504507004, 0.5457573274628758, 0.6461531072499822, 0.3839342322816228, 0.21051627711997112, 0.4371157121593354, 0.7880090854512305, 0.42686964165424235, 0.41401043199777954, 0.2917909551738125, 0.31336230900100936, 0.446328083758434, 0.6303168361805354, 0.6976829393089627, 0.6814063245012312, 0.3151017828763243, 0.10739724673402984, 0.9942012198706762, 0.039548855429983876, 0.9076152919555251, 0.696448573034705, 0.42511670184540495, 0.427084304834356, 0.08987548151419222, 0.6569968457077027, 0.6711121630745001, 0.23704627450161886, 0.38296307767461313, 0.4167529066984721, 0.9834744943290781, 0.21738246904898872, 0.9130290522232112, 0.4182909994055357, 0.3144321801827743, 0.2937771936202689, 0.3763967297815516, 0.2782144575531531, 0.14919045576109546, 0.8993858151671872, 0.9052930093009688, 0.14873184260186045, 0.10169474753655683, 0.9564396138771436, 0.4231415310107809, 0.34753064945880574, 0.8412626012188573, 0.6394936336189683, 0.45928867648391547, 0.20510609917236788, 0.5804426802715932, 0.09221073645222244, 0.5536259474274938, 0.9067174715285602, 0.9342441949266831, 0.5059680347005988, 0.7423176585261719, 0.7493873247122267, 0.637223049715983, 0.7032136849691197, 0.4123236273234445, 0.11209283768143719, 0.3139696586520191, 0.17557420235271892, 0.6678498640100106, 0.7488433317785512, 0.7751143949450254, 0.5899220464462058, 0.07497085763284561, 0.8227330837531437, 0.9758597323387896, 0.8087548425784938, 0.11334282976822574, 0.08473024187772116, 0.9650471271286396, 0.22276597636120554, 0.597274947086083, 0.17670408093956436, 0.443126543171114, 0.017776756161747675, 0.483713254928958, 0.8946144045996656, 0.9193311349268531, 0.21133596775609642, 0.6822141827297605, 0.08114129670429127, 0.6671960077608359, 0.32991352868523993, 0.9893422495824813, 0.21383911812376244, 0.36309744675714284, 0.9770848551699964, 0.4691432554486672, 0.9767808275792784, 0.9154781550868214, 0.9227839697368745, 0.25828918736318407, 0.3612986842272392, 0.39935915981322556, 0.07628413050254035, 0.997219241607807, 0.015133607558771134, 0.38878066538140765, 0.4033485600988904, 0.43838815765634065, 0.6072189292189862, 0.8927579234489769, 0.028530192234383245, 0.07822716851235034, 0.694482006964509, 0.8611298478050868, 0.6289487494114021, 0.0022511439123247268, 0.8159973067626378, 0.8389169391741045, 0.18131699233084198, 0.13695976858440528, 0.6896373274588057, 0.24684037615488386, 0.09834568933588916, 0.5811156956557093, 0.8081250749141038, 0.5541172537046641, 0.39538857009238604, 0.8373478638885541, 0.09476384884290545, 0.8448019735280885, 0.29786686913884375, 0.08200041900961574, 0.9139224132661157, 0.9738285685443875, 0.06869864487530775, 0.08858644960884043, 0.4949408307554186, 0.21091511350325187, 0.7259552535624394, 0.7476051191476807, 0.6650416312488869, 0.4399776790646961, 0.6209911280223039, 0.6742058383190908, 0.2871402740081834, 0.6094918192567991, 0.7415199586683481, 0.5549715795292405, 0.11847943493509083, 0.001184976778895841, 0.9319684460971231, 0.9129887844748046, 0.20897051830131508, 0.0694921799022894, 0.6778244000052265, 0.5070925908809323, 0.6444844230697189, 0.49279524838055, 0.3396125427868575, 0.20101277083292834, 0.8233915520544981, 0.29344122821047347, 0.20780834500583567, 0.08827868657883076, 0.21876684741206232, 0.6244950894758992, 0.5480471422401503, 0.6530561728492896, 0.29269100253299474, 0.05108781533233886, 0.36632530576176325, 0.1822388625330138, 0.7107957707742059, 0.318472984482274, 0.17717618615993813, 0.3929074453695631, 0.4878477159381389, 0.9405863080642773, 0.8999661731957929, 0.6534188631223588, 0.9752062209191017, 0.6764169445521993, 0.3217434148793985, 0.9762362603804109, 0.9734349927780017, 0.6480073250024949, 0.7660401743590353, 0.534339567204781, 0.3250785399090632, 0.6721792356192795, 0.3793580558740439, 0.13085500322022825, 0.8539841335614242, 0.6254589428806423, 0.3019852010740509, 0.943733765757051, 0.5073893224432384, 0.32079074097486227, 0.7504637333881528, 0.28242315640258964, 0.40048040542056174, 0.04207997240620753, 0.09033449950474326, 0.4935919260064805, 0.46619342922152596, 0.8656946603267324, 0.37656987140166565, 0.3205423566154759, 0.2777623579162083, 0.2310829377122392, 0.37117673149446917, 0.3991960581363676, 0.8927929268526287, 0.2232972130848221, 0.6067738831225116, 0.22816644108238404, 0.4539333670975334, 0.8622309405509618, 0.09903804301971553, 0.965373605077005, 0.1223948867919522, 0.766122241143504, 0.9871769169255815, 0.006179129829433361, 0.13009892886048924, 0.4079000337822558, 0.2608670006655156, 0.2372843456590179, 0.36800927783796933, 0.7165849972984799, 0.7912147725151051, 0.15125588910874166, 0.4903444215320638, 0.23587347326690233, 0.5248216052089887, 0.517005646147769, 0.7302444282551535, 0.7223467261775602, 0.37370319708207966, 0.12093121116642802, 0.35547705329812596, 0.7256548996167009, 0.7278472889938361, 0.0804231519878098, 0.189821214659603, 0.12892365313382026, 0.49824192297014314, 0.21609344098322092, 0.22251719328491681, 0.36723692465039104, 0.8754432515252648, 0.21580389280969925, 0.5996735429928581, 0.7827915427530852, 0.650834499832283, 0.25235657120444066, 0.2914217492745632, 0.13921371668752247, 0.31025153269769534, 0.351934756603566, 0.7476460150700366, 0.2608842997346903, 0.3066222268505525, 0.46135919621191923, 0.13305066825577727, 0.5038043159927323, 0.14787712343914672, 0.5912531854778953, 0.3496367972855865, 0.3132827523425208, 0.33441000254071995, 0.3898252710746548, 0.27673933340319445};
	int ints[1] = {2};

	int numtilings = 3;
	int size = 500; 
	int tileIdx[numtilings];

	int lenFloats = sizeof(floats)/sizeof(floats[0]);

	int lenInts = sizeof(ints)/sizeof(ints[0]);

	int numTrials = 1; // number of times to run tiles

	int CorrectTileIdx[] = {422, 127, 440}; //{468, 26, 215, 96, 250, 439, 263, 392, 484, 278, 484, 33, 208, 371, 75, 57, 455, 208, 89, 365, 411, 297, 488, 305, 268, 229, 148, 257, 33, 405, 228, 4, 359, 359, 46, 154, 30, 473, 307, 132, 437, 65, 39, 23, 477, 370, 141, 234, 272, 24, 226, 123, 369, 48, 492, 163, 153, 162, 79, 202, 296, 248, 121, 100, 363, 305, 430, 347, 223, 5, 82, 89, 183, 326, 410, 375, 253, 286, 56, 33, 1, 410, 75, 375, 129, 415, 250, 39, 110, 462, 155, 65, 352, 161, 82, 60, 412, 337, 310, 197};
	double sum = 0.0, avgTime = 0.0, minTime = INFINITY, maxTime = 0.0;
	struct timeval before , after;

	for (int i = 0; i < numTrials; i++){
		gettimeofday(&before , NULL);

		tiles(size, numtilings, floats, lenFloats, ints, lenInts, tileIdx);

		gettimeofday(&after , NULL);

		// confirm correct calculation
		int Errors = 0;
		for (int j = 0; j < numtilings; j++){
			if (tileIdx[j] != CorrectTileIdx[j]){
				printf("Error: Incorrect Arrays\nCorrect Array:  ");
				printArray(CorrectTileIdx, numtilings);
				printf("\nComputed Array: ");
				printArray(tileIdx, numtilings);
				Errors = 1;
			}
		}
		if (Errors){
			return 1;
		}

		// compute time comparison
		double timeTaken = time_diff(before , after);
		sum += timeTaken;

		if (timeTaken < minTime){
			minTime = timeTaken;
		}
		if (timeTaken > maxTime){
			maxTime = timeTaken;
		}
	}



	avgTime = sum/numTrials;
	
	printf("Avg time : %.0lf us\t Min Time : %.0lf us\t Max Time : %.0lf us\n" , avgTime, minTime, maxTime); 

	printArray(tileIdx, numtilings);

	return 0;
}





// Output
//[49, 450, 245, 461, 208, 298, 164, 492, 446, 193, 220, 462, 251, 3, 436, 40]
//[200, 421, 236, 452, 171, 85, 279, 93, 127, 230, 381, 0, 375, 57, 388, 178]
//